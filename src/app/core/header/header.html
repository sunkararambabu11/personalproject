<header class="app-header">
	<div class="header-inner">
		<!-- Left: Logo / App title -->
		<div class="header-left">
			<a class="logo" href="#">
				<div class="logo-container">
					<img src="assets/images/logo.png" alt="App logo" class="logo-img"/>
				</div>
				<span class="app-title">Service Marketplace</span>
			</a>
		</div>

		<!-- Center: Search bar -->
		<div class="header-center">
			<form class="search-form" role="search" aria-label="Search services" (submit)="onSearch($event, searchInput.value)">
				<button type="submit" class="search-btn" aria-label="Search">
					<i class="fas fa-search"></i>
				</button>
				<input
					#searchInput
					class="search-input"
					type="search"
					name="q"
					placeholder="Search"
					aria-label="Search services"
				/>
				<button type="button" class="clear-btn" aria-label="Clear search" (click)="clearSearch(searchInput)" hidden>
					<i class="fas fa-times-circle"></i>
				</button>
			</form>
		</div>

		<!-- Right: Location, Currency, Notifications, Profile -->
		<div class="header-right">
			<div class="location-wrap">
				<i class="fas fa-map-marker-alt"></i>
				<span class="location-text">Ward 104 Kondapur, Hyderabad</span>
			</div>

			<div class="currency-wrap">
				<label for="currency-select" class="sr-only">Currency</label>
				<select id="currency-select" #currencySelect class="currency-select" aria-label="Select currency" (change)="onCurrencyChange(currencySelect.value)">
					<option value="USD" data-symbol="$">USD - $</option>
					<option value="EUR" data-symbol="€">EUR - €</option>
					<option value="GBP" data-symbol="£">GBP - £</option>
					<option value="INR" data-symbol="₹" selected>INR - ₹</option>
				</select>
			</div>

			<button class="notification-btn" aria-label="Notifications">
				<i class="fas fa-bell"></i>
				<span class="notification-badge">3</span>
			</button>

			<div class="profile-wrap">
				<button class="profile-btn" aria-haspopup="true" [attr.aria-expanded]="profileOpen" (click)="toggleProfileMenu()">
					<div class="avatar-circle">
						<span class="avatar-initial">{{ (username || 'Guest').charAt(0).toUpperCase() }}</span>
					</div>
					<i class="fas fa-caret-down profile-caret"></i>
				</button>

				<nav class="profile-menu" aria-label="Profile menu" *ngIf="profileOpen">
					<ul>
						<li><a href="#">My Profile</a></li>
						<li><a href="#">Account Settings</a></li>
						<li><a href="#">Billing</a></li>
						<li><a href="#">Logout</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
</header>

<!-- Helpful utility class for screen-reader-only labels -->
<style>
	.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
</style>
